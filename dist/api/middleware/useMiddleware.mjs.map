{"version":3,"sources":["../../../src/api/middleware/useMiddleware.ts"],"sourcesContent":["// decorators/UseMiddleware.ts\nimport { Request, Response, NextFunction, RequestHandler } from 'express';\n\nfunction UseMiddleware(...middlewares: RequestHandler[]): MethodDecorator {\n  return function (target: Object, propertyKey: string | symbol, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n\n    descriptor.value = function (...args: any[]) {\n      const req = args[0] as Request;\n      const res = args[1] as Response;\n      const next = args[2] as NextFunction;\n\n      let i = 0;\n\n      const runMiddleware = (error?: any) => {\n        if (error) {\n          return next(error);\n        }\n        if (i < middlewares.length) {\n          middlewares[i](req, res, runMiddleware);\n          i++;\n        } else {\n          originalMethod.apply(this, args);\n        }\n      };\n\n      runMiddleware();\n    };\n\n    return descriptor;\n  };\n}\nexport default UseMiddleware;\n"],"mappings":";AAGA,SAAS,iBAAiB,aAAgD;AACxE,SAAO,SAAU,QAAgB,aAA8B,YAAgC;AAC7F,UAAM,iBAAiB,WAAW;AAElC,eAAW,QAAQ,YAAa,MAAa;AAC3C,YAAM,MAAM,KAAK,CAAC;AAClB,YAAM,MAAM,KAAK,CAAC;AAClB,YAAM,OAAO,KAAK,CAAC;AAEnB,UAAI,IAAI;AAER,YAAM,gBAAgB,CAAC,UAAgB;AACrC,YAAI,OAAO;AACT,iBAAO,KAAK,KAAK;AAAA,QACnB;AACA,YAAI,IAAI,YAAY,QAAQ;AAC1B,sBAAY,CAAC,EAAE,KAAK,KAAK,aAAa;AACtC;AAAA,QACF,OAAO;AACL,yBAAe,MAAM,MAAM,IAAI;AAAA,QACjC;AAAA,MACF;AAEA,oBAAc;AAAA,IAChB;AAEA,WAAO;AAAA,EACT;AACF;AACA,IAAO,wBAAQ;","names":[]}